var f=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},v=class{static fromArray(t,r){let n=r||new Me;for(let i=t.length-1;i>=0;--i)n=new be(t[i],n);return n}[Symbol.iterator](){return new qt(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function m(e,t){return new be(e,t)}function a(e,t){return v.fromArray(e,t)}var qt=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Me)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Me=class extends v{},be=class extends v{constructor(t,r){super(),this.head=t,this.tail=r}},De=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatAt(t){return Yn(this.buffer.slice(t,t+8))}intFromSlice(t,r){return Jn(this.buffer.slice(t,r))}binaryFromSlice(t,r){return new e(this.buffer.slice(t,r))}sliceAfter(t){return new e(this.buffer.slice(t))}};function Jn(e){e=e.reverse();let t=0;for(let r=e.length-1;r>=0;r--)t=t*256+e[r];return t}function Yn(e){return new Float64Array(e.reverse().buffer)[0]}var re=class e extends f{static isResult(t){return t instanceof e}},p=class extends re{constructor(t){super(),this[0]=t}isOk(){return!0}},d=class extends re{constructor(t){super(),this[0]=t}isOk(){return!1}};function w(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!kr(n)||!kr(i)||!ri(n,i)||Kn(n,i)||Vn(n,i)||Zn(n,i)||Qn(n,i)||ei(n,i)||ti(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,l]=Xn(n);for(let c of u(n))r.push(l(n,c),l(i,c))}return!0}function Xn(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Kn(e,t){return e instanceof Date&&(e>t||e<t)}function Vn(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Zn(e,t){return Array.isArray(e)&&e.length!==t.length}function Qn(e,t){return e instanceof Map&&e.size!==t.size}function ei(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function ti(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function kr(e){return typeof e=="object"&&e!==null}function ri(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function ke(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let u in s)o[u]=s[u];return o}var h=class extends f{constructor(t){super(),this[0]=t}},_=class extends f{};function Y(e,t){if(e instanceof h){let r=e[0];return new p(r)}else return new d(t)}function Ue(e){if(e.isOk()){let t=e[0];return new h(t)}else return new _}function ne(e,t){return e instanceof h?e[0]:t}function Tt(e,t){if(e instanceof h){let r=e[0];return new h(t(r))}else return new _}var We=class extends f{constructor(t,r){super(),this.content=t,this.submatches=r}},Re=class extends f{constructor(t,r){super(),this.error=t,this.byte_index=r}},Ge=class extends f{constructor(t,r){super(),this.case_insensitive=t,this.multi_line=r}};function Or(e,t){return Ar(e,t)}function Lr(e,t){return vr(e,t)}var Er=new WeakMap,zt=new DataView(new ArrayBuffer(8)),Ct=0;function St(e){let t=Er.get(e);if(t!==void 0)return t;let r=Ct++;return Ct===2147483647&&(Ct=0),Er.set(e,r),r}function Nt(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function It(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function qr(e){zt.setFloat64(0,e);let t=zt.getInt32(0),r=zt.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function ni(e){return It(e.toString())}function ii(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return St(e);if(e instanceof Date)return qr(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+T(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+T(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Nt(T(n),T(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Nt(T(o),It(s))|0}}return r}function T(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return qr(e);case"string":return It(e);case"bigint":return ni(e);case"object":return ii(e);case"symbol":return St(e);case"function":return St(e);default:return 0}}var P=5,Bt=Math.pow(2,P),si=Bt-1,oi=Bt/2,ui=Bt/4,A=0,B=1,E=2,X=3,Pt={type:E,bitmap:0,array:[]};function Oe(e,t){return e>>>t&si}function Je(e,t){return 1<<Oe(e,t)}function li(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Mt(e,t){return li(e&t-1)}function z(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function fi(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Ft(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Tr(e,t,r,n,i,s){let o=T(t);if(o===n)return{type:X,hash:o,array:[{type:A,k:t,v:r},{type:A,k:i,v:s}]};let u={val:!1};return Le(Dt(Pt,e,o,t,r,u),e,n,i,s,u)}function Le(e,t,r,n,i,s){switch(e.type){case B:return ai(e,t,r,n,i,s);case E:return Dt(e,t,r,n,i,s);case X:return ci(e,t,r,n,i,s)}}function ai(e,t,r,n,i,s){let o=Oe(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:B,size:e.size+1,array:z(e.array,o,{type:A,k:n,v:i})};if(u.type===A)return w(n,u.k)?i===u.v?e:{type:B,size:e.size,array:z(e.array,o,{type:A,k:n,v:i})}:(s.val=!0,{type:B,size:e.size,array:z(e.array,o,Tr(t+P,u.k,u.v,r,n,i))});let l=Le(u,t+P,r,n,i,s);return l===u?e:{type:B,size:e.size,array:z(e.array,o,l)}}function Dt(e,t,r,n,i,s){let o=Je(r,t),u=Mt(e.bitmap,o);if(e.bitmap&o){let l=e.array[u];if(l.type!==A){let $=Le(l,t+P,r,n,i,s);return $===l?e:{type:E,bitmap:e.bitmap,array:z(e.array,u,$)}}let c=l.k;return w(n,c)?i===l.v?e:{type:E,bitmap:e.bitmap,array:z(e.array,u,{type:A,k:n,v:i})}:(s.val=!0,{type:E,bitmap:e.bitmap,array:z(e.array,u,Tr(t+P,c,l.v,r,n,i))})}else{let l=e.array.length;if(l>=oi){let c=new Array(32),$=Oe(r,t);c[$]=Dt(Pt,t+P,r,n,i,s);let b=0,y=e.bitmap;for(let j=0;j<32;j++){if(y&1){let J=e.array[b++];c[j]=J}y=y>>>1}return{type:B,size:l+1,array:c}}else{let c=fi(e.array,u,{type:A,k:n,v:i});return s.val=!0,{type:E,bitmap:e.bitmap|o,array:c}}}}function ci(e,t,r,n,i,s){if(r===e.hash){let o=Ut(e,n);if(o!==-1)return e.array[o].v===i?e:{type:X,hash:r,array:z(e.array,o,{type:A,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:X,hash:r,array:z(e.array,u,{type:A,k:n,v:i})}}return Le({type:E,bitmap:Je(e.hash,t),array:[e]},t,r,n,i,s)}function Ut(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(w(t,e.array[n].k))return n;return-1}function He(e,t,r,n){switch(e.type){case B:return pi(e,t,r,n);case E:return di(e,t,r,n);case X:return _i(e,n)}}function pi(e,t,r,n){let i=Oe(r,t),s=e.array[i];if(s!==void 0){if(s.type!==A)return He(s,t+P,r,n);if(w(n,s.k))return s}}function di(e,t,r,n){let i=Je(r,t);if(!(e.bitmap&i))return;let s=Mt(e.bitmap,i),o=e.array[s];if(o.type!==A)return He(o,t+P,r,n);if(w(n,o.k))return o}function _i(e,t){let r=Ut(e,t);if(!(r<0))return e.array[r]}function Wt(e,t,r,n){switch(e.type){case B:return mi(e,t,r,n);case E:return hi(e,t,r,n);case X:return $i(e,n)}}function mi(e,t,r,n){let i=Oe(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===A){if(!w(s.k,n))return e}else if(o=Wt(s,t+P,r,n),o===s)return e;if(o===void 0){if(e.size<=ui){let u=e.array,l=new Array(e.size-1),c=0,$=0,b=0;for(;c<i;){let y=u[c];y!==void 0&&(l[$]=y,b|=1<<c,++$),++c}for(++c;c<u.length;){let y=u[c];y!==void 0&&(l[$]=y,b|=1<<c,++$),++c}return{type:E,bitmap:b,array:l}}return{type:B,size:e.size-1,array:z(e.array,i,o)}}return{type:B,size:e.size,array:z(e.array,i,o)}}function hi(e,t,r,n){let i=Je(r,t);if(!(e.bitmap&i))return e;let s=Mt(e.bitmap,i),o=e.array[s];if(o.type!==A){let u=Wt(o,t+P,r,n);return u===o?e:u!==void 0?{type:E,bitmap:e.bitmap,array:z(e.array,s,u)}:e.bitmap===i?void 0:{type:E,bitmap:e.bitmap^i,array:Ft(e.array,s)}}return w(n,o.k)?e.bitmap===i?void 0:{type:E,bitmap:e.bitmap^i,array:Ft(e.array,s)}:e}function $i(e,t){let r=Ut(e,t);if(r<0)return e;if(e.array.length!==1)return{type:X,hash:e.hash,array:Ft(e.array,r)}}function zr(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===A){t(s.v,s.k);continue}zr(s,t)}}}var se=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=He(this.root,0,T(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Pt:this.root,s=Le(i,0,T(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Wt(this.root,0,T(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:He(this.root,0,T(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){zr(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Nt(T(r),T(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&w(t.get(i,!n),n)}),r}};var Rt=void 0,Cr={};function Fr(e){return/^[-+]?(\d+)$/.test(e)?new p(parseInt(e)):new d(Rt)}function Ir(e){return e.toString()}function xi(e){if(Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function Br(e){let t,r=xi(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new p([t,e.slice(t.length)]):new d(Rt)}function Gt(e){return e.toLowerCase()}function Ht(e){let t="";for(let r of e)t=t+r;return t}function Pr(e,t){return e.startsWith(t)}function Mr(e){console.log(e)}function Ar(e,t){try{let r="gu";return t.case_insensitive&&(r+="i"),t.multi_line&&(r+="m"),new p(new RegExp(e,r))}catch(r){let n=(r.columnNumber||0)|0;return new d(new Re(r.message,n))}}function vr(e,t){let r=Array.from(t.matchAll(e)).map(n=>{let i=n[0],s=[];for(let o=n.length-1;o>0;o--){if(n[o]){s[o-1]=new h(n[o]);continue}s.length>0&&(s[o-1]=new _)}return new We(i,v.fromArray(s))});return v.fromArray(r)}function Dr(e,t){let r=e.get(t,Cr);return r===Cr?new d(Rt):new p(r)}function Jt(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof re)return"Result";if(e instanceof v)return"List";if(e instanceof De)return"BitArray";if(e instanceof se)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Yt(e,t){return wi(e,Jt(t))}function wi(e,t){return new d(v.fromArray([new K(e,t,v.fromArray([]))]))}function Ur(e){return typeof e=="string"?new p(e):Yt("String",e)}function Wr(e){return Number.isInteger(e)?new p(e):Yt("Int",e)}function Rr(e,t){let r=()=>Yt("Dict",e);if(e instanceof se||e instanceof WeakMap||e instanceof Map){let n=Dr(e,t);return new p(n.isOk()?new h(n[0]):new _)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?Sr(e,t,()=>new p(new _)):Sr(e,t,r)}function Sr(e,t,r){try{return t in e?new p(new h(e[t])):r()}catch{return r()}}function Kt(e){return Fr(e)}function N(e){return Ir(e)}function Yr(e){return e[1]}function bi(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function G(e){return bi(e,a([]))}function Zr(e){if(e.hasLength(0))return new d(void 0);{let t=e.head;return new p(t)}}function ki(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return G(s);{let o=n.head;e=n.tail,t=i,r=m(i(o),s)}}}function F(e,t){return ki(e,t,a([]))}function Oi(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function ae(e,t){return Oi(G(e),t)}function Li(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=m(n,s)}}function Qr(e,t){return Li(e,t,a([]))}function U(e,t){if(e.isOk()){let r=e[0];return new p(t(r))}else{let r=e[0];return new d(r)}}function ve(e,t){if(e.isOk()){let r=e[0];return new p(r)}else{let r=e[0];return new d(t(r))}}function W(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new d(r)}}function C(e,t){return W(e,t)}function en(e,t){return e.isOk()?e[0]:t}function tn(e){return ve(e,t=>{})}function ce(e){return Ht(e)}function V(e){return e}var K=class extends f{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function Z(e){return e}function Ke(e){return Ur(e)}function Ve(e){return Jt(e)}function qi(e){return Wr(e)}function nn(e){return t=>{if(e.hasLength(0))return new d(a([new K("another type",Ve(t),a([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new p(s)}else return nn(n)(t)}}}function Ti(e,t){let r=Z(t),n=nn(a([Ke,s=>U(qi(s),N)])),i=(()=>{let s=n(r);if(s.isOk())return s[0];{let o=a(["<",Ve(r),">"]),u=ce(o);return V(u)}})();return e.withFields({path:m(i,e.path)})}function zi(e,t){return ve(e,r=>F(r,t))}function Qt(e,t){return r=>{let n=new K("field","nothing",a([]));return W(Rr(r,e),i=>{let o=Y(i,a([n])),u=W(o,t);return zi(u,l=>Ti(l,e))})}}function de(e){return Gt(e)}function sn(e,t){return Pr(e,t)}function on(e){let r=ce(e);return V(r)}function ee(e){return Br(e)}function un(e){return Mr(e)}function Ze(e,t,r){return e?t:r()}function cn(e){try{let t=JSON.parse(e);return new p(t)}catch(t){return new d(Mi(t,e))}}function Mi(e,t){return Di(e)?new et:Ui(e,t)}function Di(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Ui(e,t){let r=[Wi,Ri,Hi,Gi];for(let n of r){let i=n(e,t);if(i)return i}return new H("",0)}function Wi(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Qe(r[1]);return new H(n,-1)}function Ri(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Qe(r[1]),i=Number(r[2]);return new H(n,i)}function Gi(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=Ji(i,s,t),u=Qe(t[o]);return new H(u,o)}function Hi(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Qe(r[2]);return new H(n,0)}function Qe(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Ji(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var et=class extends f{},H=class extends f{constructor(t,r){super(),this.byte=t,this.position=r}};var rr=class extends f{constructor(t){super(),this[0]=t}};function Ki(e,t){return C(cn(e),r=>{let n=t(r);return ve(n,i=>new rr(i))})}function pn(e,t){return Ki(e,t)}var tt=class extends f{constructor(t){super(),this.all=t}};function dn(e){return new tt(a([(t,r)=>e(t)]))}function _e(){return new tt(a([]))}var Ee=class extends f{constructor(t){super(),this.content=t}},k=class extends f{constructor(t,r,n,i,s,o,u){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}};var me=class extends f{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},qe=class extends f{constructor(t,r){super(),this[0]=t,this[1]=r}};function mn(e,t){return new me(e,Z(t),!1)}function hn(e,t){return new me(e,Z(t),!0)}function $n(e,t){return new qe("on"+e,t)}function it(e){return mn("class",e)}function xn(e){return mn("src",e)}function wn(e){return hn("height",e)}function gn(e){return hn("width",e)}function Te(e,t,r){return e==="area"?new k("","",e,t,a([]),!1,!0):e==="base"?new k("","",e,t,a([]),!1,!0):e==="br"?new k("","",e,t,a([]),!1,!0):e==="col"?new k("","",e,t,a([]),!1,!0):e==="embed"?new k("","",e,t,a([]),!1,!0):e==="hr"?new k("","",e,t,a([]),!1,!0):e==="img"?new k("","",e,t,a([]),!1,!0):e==="input"?new k("","",e,t,a([]),!1,!0):e==="link"?new k("","",e,t,a([]),!1,!0):e==="meta"?new k("","",e,t,a([]),!1,!0):e==="param"?new k("","",e,t,a([]),!1,!0):e==="source"?new k("","",e,t,a([]),!1,!0):e==="track"?new k("","",e,t,a([]),!1,!0):e==="wbr"?new k("","",e,t,a([]),!1,!0):new k("","",e,t,r,!1,!1)}function ze(e){return new Ee(e)}var st=class extends f{constructor(t){super(),this[0]=t}},D=class extends f{constructor(t){super(),this[0]=t}};var te=class extends f{};var ot=class extends f{constructor(t){super(),this[0]=t}};function ur(e,t,r,n=!1){let i,s=[{prev:e,next:t,parent:e.parentNode}];for(;s.length;){let{prev:o,next:u,parent:l}=s.pop();if(u.subtree!==void 0&&(u=u.subtree()),u.content!==void 0)if(o)if(o.nodeType===Node.TEXT_NODE)o.textContent!==u.content&&(o.textContent=u.content),i??=o;else{let c=document.createTextNode(u.content);l.replaceChild(c,o),i??=c}else{let c=document.createTextNode(u.content);l.appendChild(c),i??=c}else if(u.tag!==void 0){let c=ps({prev:o,next:u,dispatch:r,stack:s,isComponent:n});o?o!==c&&l.replaceChild(c,o):l.appendChild(c),i??=c}else u.elements!==void 0?ut(u,c=>{s.unshift({prev:o,next:c,parent:l}),o=o?.nextSibling}):u.subtree!==void 0&&s.push({prev:o,next:u,parent:l})}return i}function ps({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(Ce.has(o))u=Ce.get(o);else{let g=new Map;Ce.set(o,g),u=g}let l=s?new Set(u.keys()):null,c=s?new Set(Array.from(e.attributes,g=>g.name)):null,$=null,b=null,y=null;for(let g of t.attrs){let x=g[0],L=g[1];if(g.as_property)o[x]!==L&&(o[x]=L),s&&c.delete(x);else if(x.startsWith("on")){let q=x.slice(2),ye=r(L);u.has(q)||o.addEventListener(q,Se),u.set(q,ye),s&&l.delete(q)}else if(x.startsWith("data-lustre-on-")){let q=x.slice(15),ye=r(ds);u.has(q)||o.addEventListener(q,Se),u.set(q,ye),o.setAttribute(x,L)}else x==="class"?$=$===null?L:$+" "+L:x==="style"?b=b===null?L:b+L:x==="dangerous-unescaped-html"?y=L:(typeof L=="string"&&o.setAttribute(x,L),(x==="value"||x==="selected")&&(o[x]=L),s&&c.delete(x))}if($!==null&&(o.setAttribute("class",$),s&&c.delete("class")),b!==null&&(o.setAttribute("style",b),s&&c.delete("style")),s){for(let g of c)o.removeAttribute(g);for(let g of l)u.delete(g),o.removeEventListener(g,Se)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(y!==null)return o.innerHTML=y,o;let j=o.firstChild,J=null,Be=null,Pe=null,ge=t.children[Symbol.iterator]().next().value;s&&ge!==void 0&&ge.key!==void 0&&ge.key!==""&&(J=new Set,Be=bn(e),Pe=bn(t));for(let g of t.children)ut(g,x=>{x.key!==void 0&&J!==null?j=_s(j,x,o,n,Pe,Be,J):(n.unshift({prev:j,next:x,parent:o}),j=j?.nextSibling)});for(;j;){let g=j.nextSibling;o.removeChild(j),j=g}return o}var Ce=new WeakMap;function Se(e){let t=e.currentTarget;if(!Ce.has(t)){t.removeEventListener(e.type,Se);return}let r=Ce.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Se);return}r.get(e.type)(e)}function ds(e){let t=e.target,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let u=o.split(".");for(let l=0,c=s,$=e;l<u.length;l++)l===u.length-1?c[u[l]]=$[u[l]]:(c[u[l]]??={},$=$[u[l]],c=c[u[l]]);return s},{data:n})}}function bn(e){let t=new Map;if(e)for(let r of e.children)ut(r,n=>{let i=n?.key||n?.getAttribute?.("data-lustre-key");i&&t.set(i,n)});return t}function _s(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let l=e.nextSibling;r.removeChild(e),e=l}if(s.size===0)return ut(t,l=>{n.unshift({prev:e,next:l,parent:r}),e=e?.nextSibling}),e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!u&&e!==null){let l=document.createTextNode("");return r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e}return!u||u===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e)}function ut(e,t){if(e.elements!==void 0)for(let r of e.elements)t(r);else t(e)}var lt=class e{#e=null;#r=[];#t=[];#i=!1;#o=!1;#n=null;#u=null;#s=null;static start(t,r,n,i,s){if(!ft())return new d(new he);let o=r instanceof HTMLElement?r:document.querySelector(r);if(!o)return new d(new at(r));let u=new e(n(t),i,s,o);return new p(l=>u.send(l))}constructor([t,r],n,i,s=document.body,o=!1){this.#n=t,this.#u=n,this.#s=i,this.#e=s,this.#t=r.all.toArray(),this.#i=!0,this.#o=o,window.requestAnimationFrame(()=>this.#l())}send(t){switch(!0){case t instanceof D:{this.#r.push(t[0]),this.#l();return}case t instanceof te:{this.#c();return}case t instanceof st:{this.#a(t[0]);return}default:return}}emit(t,r){this.#e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:r,composed:!0}))}#l(){this.#f();let t=this.#s(this.#n),r=n=>i=>{let s=n(i);s instanceof p&&this.send(new D(s[0]))};this.#i=!1,this.#e=ur(this.#e,t,r,this.#o)}#f(t=0){for(;this.#r.length;){let[r,n]=this.#u(this.#n,this.#r.shift());this.#i||=!w(this.#n,r),this.#n=r,this.#t=this.#t.concat(n.all.toArray())}for(;this.#t.length;)this.#t.shift()(r=>this.send(new D(r)),(r,n)=>this.emit(r,n));this.#r.length&&(t<5?this.#f(++t):window.requestAnimationFrame(()=>this.#l()))}#a(t){switch(!0){case t instanceof ot:{let r=this.#s(t[0]),n=i=>s=>{let o=i(s);o instanceof p&&this.send(new D(o[0]))};this.#r=[],this.#t=[],this.#i=!1,this.#e=ur(this.#e,r,n,this.#o)}}}#c(){this.#e.remove(),this.#e=null,this.#n=null,this.#r=[],this.#t=[],this.#i=!1,this.#u=()=>{},this.#s=()=>{}}},kn=(e,t,r)=>lt.start(r,t,e.init,e.update,e.view),ft=()=>window&&window.document;var lr=class extends f{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var at=class extends f{constructor(t){super(),this.selector=t}},he=class extends f{};function On(e,t,r){return new lr(e,t,r,new _)}function Ln(e,t,r){return Ze(!ft(),new d(new he),()=>kn(e,t,r))}function ct(e,t){return Te("div",e,t)}function jn(e){return Te("img",e,a([]))}function fr(e,t){return Te("button",e,t)}function $s(e,t){return $n(e,t)}function ar(e){return $s("click",t=>new p(e))}var Ne=class extends f{constructor(t,r,n,i,s,o,u){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=u}};function An(e,t){let n=Or(e,new Ge(!0,!1)),i=tn(n),s=U(i,l=>Lr(l,t)),o=W(s,Zr),u=U(o,l=>l.submatches);return en(u,a([]))}function gs(e){if(e instanceof _)return new _;{let t=e[0],r=ee(t);if(r.isOk()&&r[0][0]==="?"){let n=r[0][1];return new h(n)}else return new _}}function pt(e){return e instanceof h&&e[0]===""?new _:e instanceof _?new _:e}function ys(e,t){for(;;){let r=e,n=t;if(n===0)return 0;if(r.hasLength(0))return n;e=r.tail,t=n-1}}function vn(e,t){return ae(e,Qr(new _,ys(e,t)))}function bs(e){let t=ne(e,"");if(t==="")return[new _,new _,new _];if(t==="//")return[new _,new h(""),new _];{let r=t,n=(()=>{let s=An("^(//)?((.*)@)?(\\[[a-zA-Z0-9:.]*\\]|[^:]*)(:(\\d*))?",r);return vn(s,6)})();if(n.hasLength(6)){let i=n.tail.tail.head,s=n.tail.tail.tail.head,o=n.tail.tail.tail.tail.tail.head,u=pt(i),l=pt(s),c=(()=>{let b=ne(o,""),y=Kt(b);return Ue(y)})();return[u,l,c]}else return[new _,new _,new _]}}function ks(e){let t="^(([a-z][a-z0-9\\+\\-\\.]*):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#.*)?",r=(()=>{let x=An(t,e);return vn(x,8)})(),n=(()=>{if(r.hasLength(8)){let g=r.tail.head,x=r.tail.tail.head,L=r.tail.tail.tail.tail.head,q=r.tail.tail.tail.tail.tail.head,ye=r.tail.tail.tail.tail.tail.tail.tail.head;return[g,x,L,q,ye]}else return[new _,new _,new _,new _,new _]})(),i=n[0],s=n[1],o=n[2],u=n[3],l=n[4],c=pt(i),$=ne(o,""),b=gs(u),y=bs(s),j=y[0],J=y[1],Be=y[2],Pe=(()=>{let x=Y(l,void 0),L=W(x,ee),q=U(L,Yr);return Ue(q)})(),ge=(()=>{let x=pt(c);return Tt(x,de)})();return new p(new Ne(ge,j,J,Be,$,b,Pe))}function En(e){return ks(e)}function qn(e){let t=(()=>{let u=e.fragment;if(u instanceof h){let l=u[0];return a(["#",l])}else return a([])})(),r=(()=>{let u=e.query;if(u instanceof h){let l=u[0];return m("?",m(l,t))}else return t})(),n=m(e.path,r),i=(()=>{let u=e.host,l=sn(e.path,"/");if(u instanceof h&&!l&&u[0]!==""){let c=u[0];return m("/",n)}else return n})(),s=(()=>{let u=e.host,l=e.port;if(u instanceof h&&l instanceof h){let c=l[0];return m(":",m(N(c),i))}else return i})(),o=(()=>{let u=e.scheme,l=e.userinfo,c=e.host;if(u instanceof h&&l instanceof h&&c instanceof h){let $=u[0],b=l[0],y=c[0];return m($,m("://",m(b,m("@",m(y,s)))))}else if(u instanceof h&&l instanceof _&&c instanceof h){let $=u[0],b=c[0];return m($,m("://",m(b,s)))}else if(u instanceof h&&l instanceof h&&c instanceof _){let $=u[0];return m($,m(":",s))}else if(u instanceof h&&l instanceof _&&c instanceof _){let $=u[0];return m($,m(":",s))}else if(u instanceof _&&l instanceof _&&c instanceof h){let $=c[0];return m("//",m($,s))}else return s})();return on(o)}var $e=class extends f{},Fe=class extends f{},dt=class extends f{},_t=class extends f{},mt=class extends f{},ht=class extends f{},$t=class extends f{},xt=class extends f{},wt=class extends f{};var gt=class extends f{},Ie=class extends f{};function Tn(e){return e instanceof $t?"connect":e instanceof mt?"delete":e instanceof $e?"get":e instanceof dt?"head":e instanceof xt?"options":e instanceof wt?"patch":e instanceof Fe?"post":e instanceof _t?"put":e instanceof ht?"trace":e[0]}function zn(e){return e instanceof gt?"http":"https"}function Cn(e){let t=de(e);return t==="http"?new p(new gt):t==="https"?new p(new Ie):new d(void 0)}var pr=class extends f{constructor(t,r,n,i,s,o,u,l){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=u,this.query=l}};function Nn(e){return new Ne(new h(zn(e.scheme)),new _,new h(e.host),e.port,e.path,e.query,new _)}function Es(e){return C((()=>{let t=e.scheme,r=ne(t,"");return Cn(r)})(),t=>C((()=>{let r=e.host;return Y(r,void 0)})(),r=>{let n=new pr(new $e,a([]),"",t,r,e.port,e.path,e.query);return new p(n)}))}function Fn(e){let r=En(e);return C(r,Es)}var R=class extends f{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};var xe=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function yt(e){return Promise.resolve(xe.wrap(e))}function In(e,t){return e.then(r=>t(xe.unwrap(r)))}function bt(e,t){return e.then(r=>xe.wrap(t(xe.unwrap(r))))}function dr(e,t){return e.catch(r=>t(r))}function Bn(e,t){return bt(e,n=>(t(n),n))}function kt(e,t){return In(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return yt(new d(i))}})}async function Mn(e){try{return new p(await fetch(e))}catch(t){return new d(new Ot(t.toString()))}}function Dn(e){return new R(e.status,v.fromArray([...e.headers]),e)}function Un(e){let t=qn(Nn(e)),r=Tn(e.method).toUpperCase(),n={headers:zs(e.headers),method:r};return r!=="GET"&&r!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function zs(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function _r(e){let t;try{t=await e.body.text()}catch{return new d(new Lt)}return new p(e.withFields({body:t}))}var Ot=class extends f{constructor(t){super(),this[0]=t}},Lt=class extends f{};function Wn(e){let r=Un(e),n=Mn(r);return kt(n,i=>yt(new p(Dn(i))))}var mr=class extends f{constructor(t){super(),this[0]=t}},hr=class extends f{constructor(t){super(),this[0]=t}},$r=class extends f{constructor(t){super(),this[0]=t}},jt=class extends f{},xr=class extends f{},wr=class extends f{constructor(t,r){super(),this[0]=t,this[1]=r}},gr=class extends f{},yr=class extends f{constructor(t){super(),this.run=t}};function Ss(e,t,r){let n=Wn(e),i=kt(n,_r),s=bt(i,u=>{if(u.isOk()){let l=u[0];return t.run(new p(l))}else return t.run(new d(new jt))}),o=dr(s,u=>t.run(new d(new jt)));Bn(o,r)}function Rn(e,t){return dn(r=>{let n=Fn(e);if(n.isOk()){let i=n[0];return Ss(i,t,r)}else return r(t.run(new d(new mr(e))))})}function Ns(e){if(e instanceof R&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new p(r)}else{if(e instanceof R&&e.status===401)return new d(new gr);if(e instanceof R&&e.status===404)return new d(new xr);if(e instanceof R&&e.status===500){let t=e.body;return new d(new hr(t))}else{let t=e.status,r=e.body;return new d(new wr(t,r))}}}function Gn(e,t){return new yr(r=>{let i=C(r,Ns),s=C(i,o=>{let u=pn(o,e);if(u.isOk()){let l=u[0];return new p(l)}else{let l=u[0];return new d(new $r(l))}});return t(s)})}var br=class extends f{constructor(t,r){super(),this.count=t,this.cats=r}},At=class extends f{},vt=class extends f{},Et=class extends f{constructor(t){super(),this[0]=t}};function Is(e){return[new br(0,a([])),_e()]}function Bs(){let e=Qt("_id",Ke),t=Gn(e,n=>new Et(n)),r=Rn("https://cataas.com/cat?json=true",t);return un("Fetching cat"),r}function Ps(e,t){if(t instanceof At)return[e.withFields({count:e.count+1}),Bs()];if(t instanceof vt)return[e.withFields({count:e.count-1}),_e()];if(t instanceof Et&&t[0].isOk()){let r=t[0][0];return[e.withFields({cats:m(r,e.cats)}),_e()]}else return[e,_e()]}function Ms(e){let t=N(e.count);return ct(a([]),a([fr(a([it("text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"),ar(new At)]),a([ze("+")])),ct(a([it("py-2.5 px-5 me-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-full border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700")]),a([ze(t)])),fr(a([it("focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"),ar(new vt)]),a([ze("-")])),ct(a([]),F(e.cats,r=>jn(a([xn("https://cataas.com/cat/"+r),wn(200),gn(200)]))))]))}function Hn(){let e=On(Is,Ps,Ms),t=Ln(e,"#app",void 0);if(!t.isOk())throw ke("assignment_no_match","app",15,"main","Assignment pattern did not match",{value:t})}Hn();
